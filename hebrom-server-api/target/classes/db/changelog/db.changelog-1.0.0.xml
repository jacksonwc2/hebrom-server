<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_usuario">

		<createTable remarks="Entidade Usuario"
			tableName="tb_usuario">
			<column name="id_usuario" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="tx_login" type="varchar(32)"></column>
			<column name="tx_senha" type="varchar(32)"></column>
			<column name="fl_cadastrar" type="boolean"></column>
			<column name="fl_editar" type="boolean"></column>
			<column name="fl_excluir" type="boolean"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_usuario" startValue="1" />

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="carga_tb_usuario">

		<sql splitStatements="false" stripComments="false"
			dbms="postgresql">
            <![CDATA[
            	INSERT INTO tb_usuario (id_usuario, tx_login, tx_senha, fl_cadastrar, fl_editar, fl_excluir) VALUES (nextval('seq_usuario'), 'admin', '123456', true, true, true);
            ]]>
		</sql>

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_categoria">

		<createTable remarks="Entidade Categoria"
			tableName="tb_categoria">
			<column name="id_categoria" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="tx_descricao" type="varchar(32)"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_categoria" startValue="1" />

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_espaco">

		<createTable remarks="Entidade Categoria"
			tableName="tb_espaco">
			<column name="id_espaco" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="tx_descricao" type="varchar(32)"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_espaco" startValue="1" />

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_entidade">

		<createTable remarks="Entidade Entidade"
			tableName="tb_entidade">
			<column name="id_entidade" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="tx_nomefantasia" type="varchar(33)"></column>
			<column name="tx_razaosocial" type="varchar(33)"></column>
			<column name="tx_cnpj" type="varchar(32)"></column>
			<column name="tx_endereco" type="varchar(32)"></column>
			<column name="tx_telefone" type="varchar(32)"></column>
			<column name="tx_email" type="varchar(32)"></column>
			<column name="tx_documento" type="varchar(32)"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_entidade" startValue="1" />

	</changeSet>
	
	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_acervostatus">

		<createTable remarks="Entidade Acervo Status"
			tableName="tb_acervostatus">
			<column name="id_acervostatus" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="tx_descricao" type="varchar(32)"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_acervostatus" startValue="1" />

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="carga_tb_acervostatus">

		<sql splitStatements="false" stripComments="false"
			dbms="postgresql">
            <![CDATA[
            	INSERT INTO tb_acervostatus (id_acervostatus, tx_descricao) VALUES (nextval('seq_acervostatus'), 'Exposição');
            	INSERT INTO tb_acervostatus (id_acervostatus, tx_descricao) VALUES (nextval('seq_acervostatus'), 'Manutenção');
            ]]>
		</sql>

	</changeSet>

	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_acervo">

		<createTable remarks="Entidade Acervo"
			tableName="tb_acervo">
			<column name="id_acervo" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="cd_categoria" type="numeric">
				<constraints nullable="false"
					foreignKeyName="acervocategoria_fk"
					references="tb_categoria(id_categoria)" />
			</column>
			<column name="cd_espaco" type="numeric">
				<constraints nullable="false"
					foreignKeyName="acervoespaco_fk"
					references="tb_espaco(id_espaco)" />
			</column>
			<column name="cd_acervostatus" type="numeric">
				<constraints nullable="false"
					foreignKeyName="acervostatus_fk"
					references="tb_acervostatus(id_acervostatus)" />
			</column>
			<column name="dt_cadastro" type="datetime"
				defaultValueComputed="now()">
				<constraints nullable="false" />
			</column>
			<column name="tx_nome" type="varchar(100)"></column>
			<column name="tx_descricao" type="varchar(100)"></column>
			<column name="fl_ativo" type="boolean"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_acervo" startValue="1" />

	</changeSet>
	
	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_acervofiles">

		<createTable remarks="Entidade Acervo"
			tableName="tb_acervofiles">
			<column name="id_acervofiles" type="numeric">
				<constraints primaryKey="true" />
			</column>
			<column name="cd_acervo" type="numeric">
				<constraints nullable="false"
					foreignKeyName="acervofiles_fk"
					references="tb_acervo(id_acervo)" />
			</column>
			<column name="tx_url" type="varchar(32)"></column>
		</createTable>

		<createSequence incrementBy="1"
			sequenceName="seq_acervofiles" startValue="1" />

	</changeSet>
	
	
	<changeSet author="Jackson Willian Carbonera"
		id="criar_tb_visitante">
	
		<createTable remarks="Entidade Visitante"
			tableName="tb_visitante">
			<column name="tx_nome" type="varchar"></column>
			<column name="tx_idade" type="varchar"></column>
			<column name="tx_telefone" type="varchar"></column>
			<column name="tx_email" type="varchar"></column>
		</createTable>

	</changeSet>

</databaseChangeLog>
